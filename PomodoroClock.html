<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <title>25+5 Clock</title>
    <!--<link rel="stylesheet" type='text/css' href="css/bootstrap.min.css">-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Share Tech Mono' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <!-- <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script> -->
    <style type="text/css">
      *{padding: 0px; margin: 0px; user-select: none;}
      #container{
          width: 50%;
          position: absolute;
          top: 50%;
          left:50%;
          transform: translate(-50%,-50%);
      }#svg circle{
        stroke-width: 0.7em;
        stroke-dashoffset: 0;
        transition: stroke-dashoffset 1ms linear;
      }
      .shadow{
        box-shadow: 1px 1px 10px 2px #224b4b;
      }.button:hover{
        opacity: 0.7;
        cursor: pointer;
      }.button{
        background-color: #212529;
        text-align: center;
        border: solid 1px grey;
      }/*.btnDouble:hover {opacity: 0.6; cursor: pointer;}*/
    </style>   
  </head>
  <body style='background-color:ghostwhite;'>
    <div id='container'>
    <div id='title' class='text-white rounded-top shadow p-1' style="background-color:#212529; text-align: center;font-family: Share Tech Mono, sans;font-size: xx-large; font-weight: bold;">25 + 5 Clock</div>
    <div class='p-2 text-white rounded-bottom shadow' style="background-color:#212529">
      <div class='row w-100 ml-0' style='font-family: Share Tech Mono, sans;font-size: large; font-weight: bold;'>
        <div id='break-label' class='col'>
          <div class='rounded-top p-2 shadow' style='background-color: #17a2b8; text-align: center;'>Break Length</div>
            <div class="rounded-bottom shadow" style="background-color: #212529">
              <div id='break-length' style='text-align: center;' class='py-2'>5</div>
              <div class='row ml-0 pb-1 w-100' style='font-size: x-large; font-weight:bold;'>
                <div id='break-increment' onclick="modifyBreak(true)" class='col py-0 mx-1 rounded button' style="text-align: center;"><i class='fa fa-plus'></i></div>
                <div id='break-decrement' onclick="modifyBreak(false)" class='col py-0 mx-1 rounded button' style="text-align: center;"><i class='fa fa-minus'></i></div>
              </div>
          </div>
        </div>
        <div id='session-label' class='col'>
          <div class='rounded-top p-2 shadow' style='background-color: #17a2b8; text-align: center;'>Session Length</div>
            <div class="rounded-bottom shadow" style="background-color: #212529">
              <div id='session-length' style='text-align: center;' class='py-2'>25</div>
              <div class='row ml-0 pb-1 w-100' style='font-size: x-large; font-weight:bold;'>
                <div id='session-increment' onclick="modifySession(true)" class='col py-0 mx-1 rounded button' style="text-align: center;"><i class='fa fa-plus'></i></div>
                <div id='session-decrement' onclick="modifySession(false)" class='col py-0 mx-1 rounded button' style="text-align: center;"><i class='fa fa-minus'></i></div>
              </div>
          </div>
        </div>
      </div>
      <div id='sessionCount' style='font-family: Share Tech Mono, sans;font-size: x-large; font-weight: bold;' class='row mt-4 justify-content-md-center' >Session 01</div>
      <div class='rounded-circle m-2' style="text-align: center;">
        <!-- <p id='modeName' style='text-align: center; font-size: x-large; font-family:Share Tech Mono, sans; margin-top: -20px;'>Session</p>
        <p id='modeTime' style='text-align: center; font-size: xx-large; font-family:Share Tech Mono, sans;'>25:00</p> -->
        <svg id='svg' class='mb-2' width='200' height='200' xmlns="http://www.w3.org/2000/svg">
          <circle r='90' cx='100' cy='100' stroke='transparent' fill='transparent' stroke-dasharray="565.48"></circle>
          <circle id='perc' r='90' cx='100' cy='100' stroke='LimeGreen' fill='transparent' stroke-dasharray="565.48"></circle>
          <text id='timeMode' x='57' y='90' fill='white' style='text-align: center; font-size: x-large; font-family:Share Tech Mono, sans;'>Session</text>
          <text id='time-left' x='70' y='120' fill='white' style='text-align: center; font-size: x-large; font-family:Share Tech Mono, sans;'>25:00</text>
        </svg>
        <audio id='beep' src="https://raw.githubusercontent.com/freeCodeCamp/cdn/master/build/testable-projects-fcc/audio/BeepSound.wav"></audio>
        <!-- <p id='timer-label'>Session</p>
        <p id='time-left'>25:00</p> -->
        <div id='buttons' class='row w-100 justify-content-md-center' style="text-align: center;">
        <div class='shadow row text-white w-50 ml-3' style='text-align: center; font-size: xx-large;'>
            <div class='col-6'>
                <div id='start_stop' onclick='playStopTimer()' class='row'>
                  <div class='col button rounded mx-1'><i id='playIcon' class='fa fa-play'></i></div>
                </div>
              </div>
            <div id='reset' onclick='resetTimer()' class='col button rounded mx-1'><i class='fa fa-rotate-left'></i></div>
        </div>
      </div>
      </div>
      <div class='text-light pt-2 text-center'><p style='padding: 0px; margin: 0px;text-decoration: none; color: white; font-size: normal; font-family: Share Tech Mono, sans;'>Designed and Coded By</p></div>
                <div class='text-light pb-2 text-center'><p style='padding: 0px; margin: 0px;text-decoration: none; color: white; font-size: normal; font-family: Share Tech Mono, sans;'><a href='https://instagram.com/kratos_424/' target='_blank' class='text-white'><i class='fa fa-instagram p-1'></i>Kratos_424</a></p></div>
    </div>
    </div>

    <!--<script src="../js/jquery.js" type="text/javascript"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script type="text/javascript">

      var running = false;
      var paused = false;
      var currentMode = {session: 25, break: 5, start: false};
      var perc = 100;
      var session = 1;
      
        // var val = ((100-100)/100)*Math.PI*(90*2);
        // $('#perc').css({strokeDashoffset: val});

        function playStopTimer(){
          if (!running){
            $('#playIcon').attr('class', 'fa fa-pause')
            if (!paused){
              currentMode.session = $('#session-length').text();
              currentMode.break = $('#break-length').text();
              currentMode.start = true;
            }
            running = true;
          }else{
            $('#playIcon').attr('class', 'fa fa-play');
            running = false;
            paused =  true;
          }
        }

        function resetTimer(){
          $('#break-length').text('5');
          $('#session-length').text('25');
          $('#time-left').text('25:00');
          $('#playIcon').attr('class', 'fa fa-play');
          perc = 100;
          running = false;
          paused = false;
          $('#perc').css({strokeDashoffset: ((100-100)/100)*Math.PI*(90*2)});
          $('#perc').attr('stroke', 'LimeGreen');
          $('#timeMode').attr('fill', 'white');
          $('#time-left').attr('fill', 'white');
          session = 1;
          $('#sessionCount').text('Session 01');
          document.getElementById('beep').pause();
          document.getElementById('beep').currentTime = 0;
          $('#timeMode').text('Session');
          $('#timer-label').text('Session');
          $('#timeMode').attr('x', '57');
        }

        function modifyBreak(increament){
          if (running || paused) return;
          if (increament){
            if ($('#break-length').text() < 60) $('#break-length').text(parseInt($('#break-length').text())+1);
          }else{
            if ($('#break-length').text() > 1) $('#break-length').text(parseInt($('#break-length').text())-1);
          }
        }

        function modifySession(increament){
          if (running || paused) return;
          if (increament){
            if ($('#session-length').text() < 60) $('#session-length').text(parseInt($('#session-length').text())+1);
          }else{
            if ($('#session-length').text() > 1) $('#session-length').text(parseInt($('#session-length').text())-1);
          }$('#time-left').text(td($('#session-length').text()) + ':00');
        }

        function td(x){
          x = x + '';
          if (x.length == 1) return '0' + '' + x;
          return x;
        }

        function update(){
          if (running){
            $('#sessionCount').text('Session ' + td(session));
            var min = parseInt($('#time-left').text().substring(0,2));
            var sec = parseInt($('#time-left').text().substring(3));
            if (sec >= 1){
              sec -= 1;
              $('#time-left').text(td(min) + ':' + td(sec));
            }else{
              sec = 59;
              if (min >= 1){
                min -= 1;
                $('#time-left').text(td(min) + ':' + td(sec));
              }else{
                if ($('#timeMode').text() == 'Session'){
                  document.getElementById('beep').play();
                  $('#timeMode').text('Break');
                  $('#timer-label').text('Break');
                  $('#timeMode').attr('x', '70');
                  $('#time-left').text(td($('#break-length').text()) + ':' + '00');
                  session += 1;
                }else{
                  document.getElementById('beep').play();
                  $('#timeMode').text('Session');
                  $('#timer-label').text('Session');
                  $('#timeMode').attr('x', '57');
                  $('#time-left').text(td($('#session-length').text()) + ':' + '00');
                }
                min = parseInt($('#time-left').text().substring(0,2));
                sec = parseInt($('#time-left').text().substring(3));
              }
            }perc = ((min*60)+sec)/((currentMode.session*60)/100);
            //console.log(perc)
            $('#perc').css({strokeDashoffset: ((100-perc)/100)*Math.PI*(90*2)});
            if ((min*60)+sec < 60){
              $('#perc').attr('stroke', 'red');
              $('#timeMode').attr('fill', 'red');
              $('#time-left').attr('fill', 'red');
            }else{
              $('#perc').attr('stroke', 'LimeGreen');
              $('#timeMode').attr('fill', 'white');
              $('#time-left').attr('fill', 'white');
            }
          }
        }

        // $('#break-length').text('1');
        // $('#session-length').text('1');
        // $('#time-left').text('01:00');

        setInterval(update, 50);

    </script>
    <!--<script src="../js/bootstrap.bundle.js" type="text/javascript"></script>-->
    <!-- <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script> -->
  </body>
</html>
